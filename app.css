/* Receipt Bonsai â€” cute, aesthetic-first PWA (no calendar) */
:root{
  --bg:#FBF6EE;
  --ink:#1E2630;
  --outline:#C67970;
  --coffee:#7A4636;
  --green:#77B592;
  --mint:#BFE7D1;
  --pink:#F3C7C4;
  --butter:#F6E1A6;
  --sky:#CFE4F7;
  --card: rgba(255,255,255,0.28);
}
*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family: "American Typewriter", ui-monospace, "Courier New", monospace;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
#app{ max-width: 980px; margin: 0 auto; padding-bottom: 76px; }
button, input, textarea, select { font-family: inherit; }
.topbar{ display:flex; align-items:center; justify-content:space-between; padding: 14px 18px 10px; }
.iconBtn{ border:0; background:transparent; padding:10px; border-radius:14px; color:var(--ink); font-size: 18px; }
.iconBtn:active{transform:scale(0.98); opacity:0.85;}
.titleBlock{ text-align:center; padding: 2px 18px 6px; }
.titleBlock .title{ font-size: 26px; }
.titleBlock .sub{ font-size: 12px; opacity: 0.65; margin-top: 6px; }
.panel{ margin: 8px 18px 0; border-radius: 22px; border: 1px solid rgba(30,38,48,0.10); background: rgba(255,255,255,0.18); overflow:hidden; }
.treeWrap{ padding: 16px 16px 10px; position: relative; }
.treeMeta{ display:flex; align-items:center; justify-content:space-between; padding: 0 4px 10px; }
.pill{ border: 1px solid rgba(30,38,48,0.12); background: rgba(255,255,255,0.25); border-radius: 999px; padding: 8px 10px; font-size: 12px; opacity: 0.85; }
.treeStage{ font-size: 12px; opacity: 0.65; }
#treeSvg{ width: 100%; height: auto; display:block; user-select:none; }
.leafHit{ cursor:pointer; transform-origin: center; }
.leafHit:active{ opacity:0.85; }
.fab{
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 18px;
  width: 54px; height: 54px;
  border-radius: 999px;
  border: 2px solid rgba(30,38,48,0.30);
  background: rgba(255,255,255,0.18);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display:flex; align-items:center; justify-content:center;
  font-size: 24px; color: var(--ink);
}
.fab:active{transform: translateX(-50%) scale(0.98); opacity:0.9;}
/* Modal */
.modalRoot{
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.16);
  display:flex; align-items: center; justify-content: center;
  padding: 18px; z-index: 50;
}
.modalRoot.hidden{display:none;}
.sheet{
  width:min(560px, 100%);
  background: var(--bg);
  border-radius: 22px;
  border: 1px solid rgba(30,38,48,0.10);
  box-shadow: 0 20px 55px rgba(0,0,0,0.18);
  overflow:hidden;
}
.sheetHeader{ display:flex; align-items:center; justify-content:space-between; padding: 14px 14px 8px; }
.sheetHeader .title{ text-align:center; flex:1; font-size: 18px; }
.sheetHeader .mini{ width:44px; display:flex; justify-content:center; }
.sheetHeader .mini button{ width:42px; height:42px; border-radius: 999px; border:0; background: rgba(255,255,255,0.25); }
.sheetBody{ padding: 10px 18px 18px; }
.pickGrid{ display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 14px 14px; padding: 8px 6px 6px; }
.pickBtn{ min-width: 0;  border: 1px solid rgba(30,38,48,0.10); background: rgba(255,255,255,0.22); padding: 12px 10px; border-radius: 18px; text-align:left; }
.pickBtn:active{transform: scale(0.99); opacity: 0.88;}
.pickBtn .pTop{ display:flex; align-items:center; gap: 10px; }
.pickBtn .pName{ font-size: 14px; }
.pickBtn .pHint{ font-size: 11px; opacity: 0.65; margin-top: 6px; }
.iconMini{ width: 30px; height: 30px; display:inline-block; }
.iconMini svg{ width: 30px; height: 30px; display:block; }
.formRow{ display:flex; gap: 10px; align-items:center; margin: 10px 0; }
.label{ width: 96px; opacity: 0.72; font-size: 13px; }
.input, textarea{
  flex: 1;
  font-size: 14px;
  border: 1px solid rgba(30,38,48,0.14);
  border-radius: 14px;
  background: rgba(255,255,255,0.25);
  padding: 10px 12px;
  outline: none;
}
textarea{ min-height: 110px; resize: vertical; }
.actions{ display:flex; gap: 10px; margin-top: 14px; }
.btn{ flex:1; border: 1px solid rgba(30,38,48,0.16); background: rgba(255,255,255,0.28); padding: 12px 12px; border-radius: 16px; font-size: 14px; }
.btn:active{transform: scale(0.99); opacity:0.9;}
.btn.primary{ border-color: rgba(198,121,112,0.55); }
.btn.danger{ border-color: rgba(198,121,112,0.85); color: var(--outline); }
.searchRow{ display:flex; gap: 10px; padding: 0 18px; }
.card{ display:flex; gap: 12px; padding: 12px 12px; border-radius: 18px; border: 1px solid rgba(30,38,48,0.10); background: rgba(255,255,255,0.22); margin: 10px 18px; }
.card .meta{ flex:1; }
.card .meta .d{ font-size: 14px; margin-bottom: 2px; }
.card .meta .s{ font-size: 12px; opacity: 0.7; }
.card .meta .n{ font-size: 12px; opacity: 0.85; margin-top: 4px; line-height: 1.3; white-space: pre-wrap; }
.badge{ display:inline-block; border: 1px solid rgba(30,38,48,0.14); background: rgba(255,255,255,0.22); padding: 4px 8px; border-radius: 999px; font-size: 11px; opacity: 0.85; }
.small{ font-size: 12px; opacity: 0.75; line-height: 1.35; }
.settings{ padding: 10px 18px 0; }
.block{ border: 1px solid rgba(30,38,48,0.10); border-radius: 18px; background: rgba(255,255,255,0.22); padding: 12px; margin-bottom: 10px; }
.block .h{ font-size: 14px; margin-bottom: 8px; }
hr.hair{ border:0; border-top: 1px solid rgba(30,38,48,0.10); margin: 12px 0; }
.hidden{ display:none; }


/* Animations */
@keyframes bonsaiBreathe {
  0% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-2px) scale(1.006); }
  100% { transform: translateY(0px) scale(1); }
}
@keyframes leafSway {
  0% { transform: rotate(-2deg); }
  50% { transform: rotate(2deg); }
  100% { transform: rotate(-2deg); }
}
@keyframes leafPop {
  0% { transform: scale(0.35); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

#treeSvg { animation: bonsaiBreathe 6.5s ease-in-out infinite; transform-origin: center; }
.leafSway { transform-box: fill-box; transform-origin: center; animation: leafSway 4.8s ease-in-out infinite; }
.leafPop { animation: leafPop 220ms ease-out 1; transform-origin: center; }


@keyframes leafTapWobble {
  0%   { transform: rotate(0deg) scale(1); }
  20%  { transform: rotate(-8deg) scale(1.04); }
  50%  { transform: rotate(7deg) scale(1.05); }
  80%  { transform: rotate(-4deg) scale(1.03); }
  100% { transform: rotate(0deg) scale(1); }
}
.leafTap {
  animation: leafTapWobble 280ms ease-out 1;
  transform-origin: center;
  transform-box: fill-box;
}


@keyframes stageGrow {
  0%   { transform: scale(0.985); }
  55%  { transform: scale(1.012); }
  100% { transform: scale(1.0); }
}
#bonsaiStageWrap { transform-origin: center; }
#bonsaiStageWrap.stageGrow { animation: stageGrow 420ms ease-out 1; }

@keyframes bonsaiBreathe2 {
  0% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-2px) scale(1.004); }
  100% { transform: translateY(0px) scale(1); }
}
#treeSvg { animation: bonsaiBreathe2 7.2s ease-in-out infinite; transform-origin: center; }


/* Receipt note overlay stack */
.noteOverlay{
  position:absolute;
  left: 18px;
  top: 58px; /* below pills */
  width: min(420px, calc(100% - 36px));
  pointer-events: none;
  z-index: 20;
}
.receiptNote{
  pointer-events: auto;

  position:absolute;
  width: 100%;
  max-width: 420px;
  border-radius: 16px;
  border: 1px solid rgba(30,38,48,0.14);
  background: rgba(255,255,255,0.62);
  box-shadow: 0 14px 35px rgba(0,0,0,0.14);
  padding: 12px 12px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  overflow:hidden;
}
.receiptNote::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 20% 10%, rgba(198,121,112,0.10), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(119,181,146,0.10), transparent 45%),
    radial-gradient(circle at 40% 90%, rgba(246,225,166,0.10), transparent 45%);
  opacity:0.8;
  pointer-events:none;
}
.receiptNote .row1{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
  position:relative;
}
.receiptNote .when{
  font-size: 12px;
  opacity: 0.70;
}
.receiptNote .type{
  font-size: 13px;
  opacity: 0.92;
}
.receiptNote .amt{
  font-size: 12px;
  opacity: 0.70;
  white-space: nowrap;
}
.receiptNote .note{
  margin-top: 6px;
  font-size: 13px;
  line-height: 1.35;
  opacity: 0.92;
  position:relative;
  white-space: pre-wrap;
}
.receiptNote .hint{
  margin-top: 6px;
  font-size: 11px;
  opacity: 0.62;
  position:relative;
}

@keyframes noteIn {
  0% { transform: translateY(-8px) scale(0.98); opacity: 0; }
  100% { transform: translateY(0px) scale(1); opacity: 1; }
}
.noteIn{ animation: noteIn 220ms ease-out 1; }


@media (max-width: 420px){
  .pickGrid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .pickBtn .pName{ font-size: 13px; }
  .pickBtn .pHint{ font-size: 11px; }
}


/* Picker tile text wrapping fixes (prevents truncation on narrow screens) */
.pickBtn .pTop > div{ flex: 1; min-width: 0; }
.pickBtn .pName, .pickBtn .pHint{ white-space: normal; overflow: visible; text-overflow: clip; }

@media (max-width: 420px){
  .iconMini{ width: 26px; height: 26px; }
  .iconMini svg{ width: 26px; height: 26px; }
}
